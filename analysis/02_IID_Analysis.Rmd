---
title: "02_IID_Analysis"
output: html_document
---

```{r}
library(tidyverse)
library(knitr)
library(kableExtra)
library(here)
options(scipen = 999)
MC_Observed_Results<- read_csv(here::here("cluster-computed-csv", "MC-Observed-Results.csv"))
```

# Computing 95% CI

```{r}
MC_Observed_Results <- MC_Observed_Results |>
  mutate(bias = ATE_est - ATE,
         bias_low = bias - (1.96 * bias_se),
         bias_high = bias + (1.96 * bias_se),
         cov_low = coverage - (1.96 * cov_se),
         cov_high = coverage + (1.96 * cov_se)) |> 
  arrange(desc(independent), ICC, desc(size), desc(parametric)) |>
  dplyr::select(-`...1`)
```

# Table of computed results

```{r echo=F}
table <- MC_Observed_Results |>
  dplyr::select(ATE, bias, variance, coverage, bias_low, bias_high, cov_low, cov_high) 
```

### Classification Independent of Covariates (Order is the Same as Paper)

```{r echo = F}
table[1:8, ] |>
  kable() |>
  add_header_above(c(" " = 8)) |>
  add_header_above(c("Monte Carlo Results" = 4, "95% CI" = 4)) |>
  kable_styling()
```

# Classification Dependent on Covariates (Order is the Same as Paper)

```{r echo = F}
table[9:16, ] |>
  kable() |>
  add_header_above(c(" " = 8)) |>
  add_header_above(c("Monte Carlo Results" = 4, "95% CI" = 4)) |>
  kable_styling()
```
